<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>xuechong87.github.com by xuechong87</title>
    <link rel="stylesheet" href="../../stylesheets/styles.css">
    <link rel="stylesheet" href="../../stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="../../javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
     <!-- <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/xuechong87">View On GitHub</a></li>
        </nav>
      </div> end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>xuechong87.github.com</h1>
          <p>xuechong87's Blog</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/xuechong87">xuechong87</a></span>
          <span class="credits right"><a href="http://xuechong87.github.com/">xuechong87's index</a></span>
        </div>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <pre>
     <code>
    	package com.nbcedu.function.salarySlip.test;

		import java.lang.reflect.Method;
		import java.net.MalformedURLException;
		import java.net.URL;
		import java.net.URLClassLoader;
		
		
		public class LoaderTest2 {
			static final String JAR_PATH = "file:/D:/WEBAPPS_SHIJIA/bizplatform-webapp-shijia/function/function-salarySlip/jar/";
			static final String UC_CLASS_NAME = "com.nbcedu.integration.uc.client.facade.BaseClient";
		
			public static void main(String[] args) {
				try {
					URL[] urls = new URL[1];
					try {
						urls[0] = new URL(JAR_PATH);
					} catch (MalformedURLException e) {
						e.printStackTrace();
					}
					ClassLoader ctxLoader = Thread.currentThread().getContextClassLoader();
					ClassLoader loader = new URLClassLoader(urls, ctxLoader);
		//			ClassLoader loader = new URLClassLoader(urls);
					
					//Thread.currentThread().setContextClassLoader(loader);
					Object c =   loader.loadClass(UC_CLASS_NAME).newInstance();
					Method m = loader.loadClass(UC_CLASS_NAME).getMethod("toString");
					String s = (String) m.invoke(c);
					System.out.println(s);
					//List<NbcUcTeacher> teacherList = bc.queryTeacherList(4, 0, null);
		//			Thread.currentThread().setContextClassLoader(loader);
		//			Class client = Class.forName(UC_CLASS_NAME,true,loader);
		//			return client.newInstance();
		//			for (NbcUcTeacher nbcUcTeacher : teacherList) {
		//				System.out.println(nbcUcTeacher.getCardId());
		//			}
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
			
			
		}
		    	
    </code>
    </pre>
  </body>
</html>
